CREATE TABLE [dbo].[CATEGORIA] (
    [ID]   INT          IDENTITY (1, 1) NOT NULL,
    [NOME] VARCHAR (50) NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    UNIQUE NONCLUSTERED ([NOME] ASC)
);

CREATE TABLE [dbo].[CLIENTE] (
    [ID]              INT          IDENTITY (1, 1) NOT NULL,
    [NOME]            VARCHAR (70) NOT NULL,
    [CPF]             VARCHAR (11) NOT NULL,
    [RG]              VARCHAR (7)  NOT NULL,
    [TELEFONE_1]      VARCHAR (13) NOT NULL,
    [TELEFONE_2]      VARCHAR (13) NOT NULL,
    [GENERO]          VARCHAR (10) NOT NULL,
    [EMAIL]           VARCHAR (70) NOT NULL,
    [DATA_NASCIMENTO] DATE         NOT NULL,
    [DATA_MATRICULA]  DATE         NOT NULL,
    [ATIVO]           BIT          NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    UNIQUE NONCLUSTERED ([EMAIL] ASC),
    UNIQUE NONCLUSTERED ([TELEFONE_2] ASC),
    UNIQUE NONCLUSTERED ([TELEFONE_1] ASC),
    UNIQUE NONCLUSTERED ([RG] ASC),
    UNIQUE NONCLUSTERED ([CPF] ASC)
);

CREATE TABLE [dbo].[CLIENTE_MODALIDADE] (
    [CLIENTE_ID]    INT NOT NULL,
    [MODALIDADE_ID] INT NOT NULL,
    FOREIGN KEY ([CLIENTE_ID]) REFERENCES [dbo].[CLIENTE] ([ID]),
    FOREIGN KEY ([MODALIDADE_ID]) REFERENCES [dbo].[MODALIDADE] ([ID])
);

CREATE TABLE [dbo].[ESTOQUE] (
    [ID]             INT        IDENTITY (1, 1) NOT NULL,
    [DATA_ENTRADA]   DATE       NOT NULL,
    [VALOR_UNITARIO] FLOAT (53) NOT NULL,
    [QUANTIDADE]     INT        NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC)
);

CREATE TABLE [dbo].[FORMA_PAGAMENTO] (
    [ID]   INT          IDENTITY (1, 1) NOT NULL,
    [NOME] VARCHAR (50) NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    UNIQUE NONCLUSTERED ([NOME] ASC)
);

CREATE TABLE [dbo].[FUNCIONARIO] (
    [ID]          INT           IDENTITY (1, 1) NOT NULL,
    [NOME]        VARCHAR (70)  NOT NULL,
    [CPF]         VARCHAR (11)  NOT NULL,
    [RG]          VARCHAR (7)   NOT NULL,
    [SALARIO]     FLOAT (53)    NOT NULL,
    [COMISSAO]    FLOAT (53)    NOT NULL,
    [EMAIL]       VARCHAR (70)  NOT NULL,
    [SENHA]       VARCHAR (100) NOT NULL,
    [ATIVO]       BIT           NOT NULL,
    [PAPEL]       VARCHAR (15)  NOT NULL,
    [CIDADE]      VARCHAR (40)  NOT NULL,
    [BAIRRO]      VARCHAR (50)  NOT NULL,
    [RUA]         VARCHAR (50)  NOT NULL,
    [NUMERO]      VARCHAR (6)   NOT NULL,
    [COMPLEMENTO] VARCHAR (50)  NOT NULL,
    [TELEFONE]    VARCHAR (13)  NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    UNIQUE NONCLUSTERED ([TELEFONE] ASC),
    UNIQUE NONCLUSTERED ([EMAIL] ASC),
    UNIQUE NONCLUSTERED ([RG] ASC),
    UNIQUE NONCLUSTERED ([CPF] ASC)
);

CREATE TABLE [dbo].[FUNCIONARIO_MODALIDADE] (
    [FUNCIONARIO_ID] INT NOT NULL,
    [MODALIDADE_ID]  INT NOT NULL,
    FOREIGN KEY ([FUNCIONARIO_ID]) REFERENCES [dbo].[FUNCIONARIO] ([ID]),
    FOREIGN KEY ([MODALIDADE_ID]) REFERENCES [dbo].[MODALIDADE] ([ID])
);

CREATE TABLE [dbo].[MODALIDADE] (
    [ID]        INT           IDENTITY (1, 1) NOT NULL,
    [DESCRICAO] VARCHAR (100) NOT NULL,
    [VALOR]     FLOAT (53)    NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    UNIQUE NONCLUSTERED ([DESCRICAO] ASC)
);

CREATE TABLE [dbo].[PRODUTO] (
    [ID]           INT           IDENTITY (1, 1) NOT NULL,
    [NOME]         VARCHAR (50)  NOT NULL,
    [DESCRICAO]    VARCHAR (100) NOT NULL,
    [CATEGORIA_ID] INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    FOREIGN KEY ([CATEGORIA_ID]) REFERENCES [dbo].[CATEGORIA] ([ID])
);

CREATE TABLE [dbo].[PRODUTO_ESTOQUE] (
    [PRODUTO_ID] INT NOT NULL,
    [ESTOQUE_ID] INT NOT NULL,
    FOREIGN KEY ([ESTOQUE_ID]) REFERENCES [dbo].[ESTOQUE] ([ID]),
    FOREIGN KEY ([PRODUTO_ID]) REFERENCES [dbo].[PRODUTO] ([ID])
);

CREATE TABLE [dbo].[PRODUTO_VENDA] (
    [PRODUTO_ID] INT NOT NULL,
    [VENDA_ID]   INT NOT NULL,
    FOREIGN KEY ([PRODUTO_ID]) REFERENCES [dbo].[PRODUTO] ([ID]),
    FOREIGN KEY ([VENDA_ID]) REFERENCES [dbo].[VENDA] ([ID])
);

CREATE TABLE [dbo].[VENDA] (
    [ID]                 INT  IDENTITY (1, 1) NOT NULL,
    [DATA]               DATE NOT NULL,
    [QUANTIDADE]         INT  NOT NULL,
    [CLIENTE_ID]         INT  NOT NULL,
    [FUNCIONARIO_ID]     INT  NOT NULL,
    [FORMA_PAGAMENTO_ID] INT  NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC),
    FOREIGN KEY ([CLIENTE_ID]) REFERENCES [dbo].[CLIENTE] ([ID]),
    FOREIGN KEY ([FUNCIONARIO_ID]) REFERENCES [dbo].[FUNCIONARIO] ([ID]),
    FOREIGN KEY ([FORMA_PAGAMENTO_ID]) REFERENCES [dbo].[FORMA_PAGAMENTO] ([ID])
);

